import{g as yt,r as fe,i as ot,S as Pe,j as lt,k as he,l as ct,m as ut,n as xt,p as Be,q as Le,u as At,h as Et,v as We,w as Fe,x as ee,c as X,f as K,$ as kt,e as R,y as St,z as qe,d as H,a as N,s as k,A as B,t as He,B as J,C as Ct,D as Ke,E as Re,F as Mt,b as le,o as V,G as Je}from"../chunks/disclose-version.QwKo1mbw.js";import{r as P,i as ft,E as dt,b as Lt,d as ye,l as Ve,c as Ae,e as Ue,f as Wt,g as me,h as Ht,j as jt,k as Tt,m as De,n as Gt,o as zt,q as U,t as Ye,u as It,v as Ot,w as ce,p as Dt,x as p,a as Xt,y as L,s as Nt,z as ue,A as F,B as be,C as q}from"../chunks/runtime.ZPGqMK-J.js";import{p as Pt,i as Bt,a as Ft}from"../chunks/entry.vK8l2ytw.js";import{r as qt}from"../chunks/index.-ivAZcaO.js";const Ge=-1,je=99999999,vt=-2;function Kt(){}function ht(e,t,l,i,a,o,c){const _=(l&me)!==0,s=Ht(l,e);let m=null;yt(e,_);let A,y=null,g=null;s.r=r=>{const u=m,n=u.s;n.add(r),r.f(()=>{n.delete(r),n.size===0&&u.e!==null&&(u.d!==null&&(fe(u.d),u.d=null),ye(u.e),u.e=null)})};const f=()=>{const r={d:null,e:null,s:new Set,p:m},u=P(()=>{const n=s.d;n!==null&&(fe(n),s.d=null);let h=s.a;(s.f&me)!==0&&(he===null?(h=At(),s.a.appendChild(h)):h=h.firstChild),o(h),r.d=s.d,s.d=null},s,!0);r.e=u,m=r},d=r=>{const u=r.f,n=(u&me)!==0,h=r.a;c(A,r,h,n,a,u,!0,y)},v=P(()=>{const r=t();A=ft(r)?r:r==null?[]:Array.from(r),i!==null?y=A.map(i):l&dt||A.map(Kt);const u=A.length;if(o!==null){if(u===0){if(s.v.length!==0||g===null){d(s),f();return}}else if(s.v.length===0&&m!==null){const n=m,h=n.s;h.size===0?n.d!==null&&(fe(n.d),n.d=null):ot(h,"out")}}g!==null&&jt(g)},s,!1);g=P(d,s,!0),Lt(v,()=>{const r=s.f,u=s.a,n=(r&me)!==0;let h=m;for(;h!==null;){const W=h.d;W!==null&&fe(W);const b=h.e;b!==null&&ye(b),h=h.p}c([],s,u,n,a,r,!1,y),ye(g)}),s.e=v}function Qe(e,t,l,i,a,o){ht(e,t,l,i,a,o,Jt)}function Ze(e,t,l,i,a){ht(e,t,l,null,i,a,Rt)}function Rt(e,t,l,i,a,o,c){var _=Pe in e&&e[Pe].i,s=t.v,m=t.s;_&&(o&=~Ae);var A=s.length,y=e.length,g=Math.max(A,y),f=0,d,v;if(m.length!==0&&_t(m),y===0)for(d=[],i&&A!==0&&lt(l);f<g;)v=s[f++],ne(v,m,c,i);else{var r;if(d=Array(y),he!==null)for(var u=he[0];f<g;f++){r=_?Ve(e,f):e[f];var n=ct(u);ut(n),u=n.at(-1).nextSibling.nextSibling,v=re(r,null,f,a,o),d[f]=v}else for(;f<g;f++)f>=A?(r=_?Ve(e,f):e[f],v=re(r,null,f,a,o),d[f]=v,xe(v,l,i,null)):f>=y?(v=s[f],ne(v,m,c)):(r=e[f],v=s[f],d[f]=v,de(v,r,f,o))}t.v=d}function Jt(e,t,l,i,a,o,c,_){var s=t.v;const m=_!==null;var A=t.s,y=s.length,g=e.length,f,d;if(A.length!==0&&_t(A),g===0)for(f=[],i&&y!==0&&lt(l);y>0;)d=s[--y],ne(d,A,c,i);else{var v=y-1,r=g-1,u,n,h;if(f=Array(g),he!==null)for(var W,b=he[0];g>0;)h=r- --g,n=e[h],u=m?_[h]:n,W=ct(b),ut(W),b=(W.at(-1)||b).nextSibling.nextSibling,d=re(n,u,h,a,o),f[h]=d;else if(y===0)for(;g>0;)h=r- --g,n=e[h],u=m?_[h]:n,d=re(n,u,h,a,o),f[h]=d,xe(d,l,i,null);else{var x=(o&Tt)!==0,E=(o&(Ae|De))!==0||x,w=0,S=null;n=e[r],u=m?_[r]:n;e:for(;;){for(;s[v].k===u;){if(d=s[v--],n=e[r],E&&de(d,n,r,o),S=$e(d),f[r]=d,w>--r||w>v)break e;u=m?_[r]:n}for(n=e[w],u=m?_[w]:n;w<=v&&w<=r&&s[w].k===u;)n=e[w],d=s[w],E&&de(d,n,w,o),f[w]=d,++w,u=m?_[w]:e[w];break}if(w>v)for(;r>=w;)n=e[r],u=m?_[r]:n,d=re(n,u,r,a,o),f[r--]=d,S=xe(d,l,i,S);else if(w>r){g=w;do(d=s[g++])!==null&&ne(d,A,c);while(g<=v)}else{var M=0,j=r-w+1,G=new Int32Array(j),D=new Map;for(g=0;g<j;++g)y=g+w,G[g]=Ge,n=e[y],u=m?_[y]:n,xt(D,u,y);if(x)for(g=w;g<=v;++g)y=Be(D,s[g].k),y!==void 0&&(n=e[y],d=s[g],de(d,n,y,o));for(g=w;g<=v;++g)y=Be(D,s[g].k),d=s[g],y!==void 0?(M=M<y?y:je,G[y-w]=g,f[y]=d):d!==null&&ne(d,A,c);M===je&&Vt(G);for(var z,Y,C;j-- >0;)r=j+w,y=G[j],C=y===-1,n=e[r],C?(u=m?_[r]:n,d=re(n,u,r,a,o)):(d=f[r],!x&&E&&de(d,n,r,o)),(C||M===je&&y!==vt)&&(Y=z===void 0?S:$e(z),S=xe(d,l,i,Y)),f[r]=d,z=d}}}t.v=f}function Vt(e){for(var t=e.length,l=new Int32Array(t),i=new Int32Array(t),a=0,o=0,c,_,s,m;e[o]===Ge;++o);for(i[0]=o++;o<t;++o)if(_=e[o],_!==Ge)if(c=i[a],e[c]<_)l[o]=c,i[++a]=o;else{for(s=0,m=a;s<m;)c=s+m>>1,e[i[c]]<_?s=c+1:m=c;_<e[i[s]]&&(s>0&&(l[o]=i[s-1]),i[s]=o)}for(c=i[a];a-->=0;)e[c]=vt,c=l[c]}function xe(e,t,l,i){var a=e.d;return i===null?l?Le(a,t,null):Le(a,t.parentNode,t):Le(a,null,i)}function $e(e){var t=e.d;return ft(t)?t[0]:t}function _t(e){var t=e.length;if(t>0){for(var l=0,i,a;l<t;l++)i=e[l],a=i.r,a!==null&&(i.r=null,ne(i,null,!1));e.length=0}}function de(e,t,l,i){i&Ae?Ue(e.v,t):Wt(e.v)&&(e.v.o[e.v.p]=t);const a=e.s,o=(i&De)!==0,c=e.a;a!==null&&i&dt&&c!==null&&c(e,a),o?Ue(e.i,l):e.i=l}function ne(e,t,l,i=!1){const a=e.s;if(l&&a!==null){for(let c of a)c.r==="key"&&a.delete(c);if(a.size===0)e.s=null;else{ot(a,"out"),t!==null&&t.push(e);return}}const o=e.d;!i&&o!==null&&fe(o),ye(e.e)}function re(e,t,l,i,a){const c=(a&Ae)===0?e:a&zt?Ye(e):U(e),_=a&De?Ye(l):l,s=Gt(c,_,t),m=P(A=>{i(null,A.v,A.i)},s,!0);return s.e=m,s}const Ut=(e,t={})=>{it(t);let{colors:l=["#FFC700","#FF0000","#2E3191","#41BBC7"],duration:i=3500,force:a=.5,particleCount:o=150,particleShape:c="mix",particleSize:_=12,destroyAfterDone:s=!0,stageHeight:m=800,stageWidth:A=1600}=t;(function(v){const r=ze("style");r.dataset.neoconfetti="",r.textContent='@keyframes fk9XWG_y-axis{to{transform:translate3d(0,var(--stage-height),0)}}@keyframes fk9XWG_x-axis{to{transform:translate3d(var(--x-landing-point),0,0)}}@keyframes fk9XWG_rotation{50%{transform:rotate3d(var(--half-rotation),180deg)}to{transform:rotate3d(var(--rotation),360deg)}}.fk9XWG_container{width:0;height:0;z-index:1200;position:relative;overflow:visible}.fk9XWG_particle{animation:x-axis var(--duration-chaos)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:fk9XWG_x-axis}.fk9XWG_particle>div{animation:y-axis var(--duration-chaos)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--width);height:var(--height);animation-name:fk9XWG_y-axis;position:absolute;top:0;left:0}.fk9XWG_particle>div:before{height:100%;width:100%;content:"";background-color:var(--bgcolor);animation:rotation var(--rotation-duration)infinite linear;border-radius:var(--border-radius);animation-name:fk9XWG_rotation;display:block}',Ie(document.head,r)})(),e.classList.add("fk9XWG_container"),e.style.setProperty("--stage-height",m+"px");let y,g=rt(o,l),f=et(e,g);function d(v,r){const u=ve(O()*(ea-1)),n=c!=="rectangles"&&(c==="circles"||ta(u)),h=(x,E)=>v.style.setProperty(x,E+"");h("--x-landing-point",Te(we(nt(r,90)-180),0,180,-A/2,A/2)+"px"),h("--duration-chaos",i-ve(1e3*O())+"ms");const W=O()<Qt?te(O()*Zt,2):0;h("--x1",W),h("--x2",-1*W),h("--x3",W),h("--x4",te(we(Te(we(nt(r,90)-180),0,180,-1,1)),4)),h("--y1",te(O()*at,4)),h("--y2",te(O()*a*(gt()?1:-1),4)),h("--y3",at),h("--y4",te($t(Te(we(r-180),0,180,a,-a),0),4)),h("--width",(n?_:ve(4*O())+_/2)+"px"),h("--height",(n?_:ve(2*O())+_)+"px");const b=u.toString(2).padStart(3,"0").split("");h("--half-rotation",b.map(x=>+x/2+"")),h("--rotation",b),h("--rotation-duration",te(O()*(Yt-tt)+tt)+"ms"),h("--border-radius",n?"50%":0)}for(const[v,r]of Object.entries(f))d(r,g[+v].degree);return Promise.resolve().then(()=>y=setTimeout(()=>s&&(e.innerHTML=""),i)),{update(v){it(v);const r=v.particleCount??o,u=v.colors??l,n=v.stageHeight??m;if(g=rt(r,u),r===o&&JSON.stringify(l)!==JSON.stringify(u))for(const[h,{color:W}]of Object.entries(g))f[+h].style.setProperty("--bgcolor",W);r!==o&&(e.innerHTML="",f=et(e,g)),s&&!v.destroyAfterDone&&clearTimeout(y),e.style.setProperty("--stage-height",n+"px"),l=u,i=v.duration??i,a=v.force??a,o=r,c=v.particleShape??c,_=v.particleSize??_,s=v.destroyAfterDone??s,m=n,A=v.stageWidth??A},destroy(){clearTimeout(y)}}};function et(e,t=[]){const l=[];for(const{color:i}of t){const a=ze("div");a.className="fk9XWG_particle",a.style.setProperty("--bgcolor",i);const o=ze("div");Ie(a,o),Ie(e,a),l.push(a)}return l}const tt=200,Yt=800,Qt=.1,Zt=.3,at=.5,we=Math.abs,O=Math.random,ve=Math.round,$t=Math.max,ze=e=>document.createElement(e),Ie=(e,t)=>e.appendChild(t),rt=(e,t)=>Array.from({length:e},(l,i)=>({color:t[i%t.length],degree:360*i/e})),te=(e,t=2)=>ve((e+Number.EPSILON)*10**t)/10**t,Te=(e,t,l,i,a)=>(e-t)*(a-i)/(l-t)+i,nt=(e,t)=>e+t>360?e+t-360:e+t,gt=()=>O()>.5,ea=6,ta=e=>e!==1&&gt(),Oe=e=>e===void 0,ae=(e,t)=>{if(!Oe(e)&&Number.isSafeInteger(e)&&e<0)throw new Error(t+" must be a positive integer")},it=({particleCount:e,duration:t,colors:l,particleSize:i,force:a,stageHeight:o,stageWidth:c,particleShape:_})=>{if(ae(e,"particleCount"),ae(t,"duration"),ae(i,"particleSize"),ae(a,"force"),ae(o,"stageHeight"),ae(c,"stageWidth"),!Oe(_)&&!/^(mix|circles|rectangles)$/i.test(_))throw new Error('particlesShape should be either "mix" or "circles" or "rectangle"');if(!Oe(l)&&!Array.isArray(l))throw new Error("colors must be an array of strings");if(a>1)throw new Error("force must be within 0 and 1")};function aa(e){const t=JSON.parse(e);return t.data&&(t.data=Pt(t.data)),t}function st(e){return HTMLElement.prototype.cloneNode.call(e)}function ra(e,t=()=>{}){const l=async({action:a,result:o,reset:c=!0,invalidateAll:_=!0})=>{o.type==="success"&&(c&&HTMLFormElement.prototype.reset.call(e),_&&await Bt()),(location.origin+location.pathname===a.origin+a.pathname||o.type==="redirect"||o.type==="error")&&Ft(o)};async function i(a){var d,v,r,u;if(((d=a.submitter)!=null&&d.hasAttribute("formmethod")?a.submitter.formMethod:st(e).method)!=="post")return;a.preventDefault();const c=new URL((v=a.submitter)!=null&&v.hasAttribute("formaction")?a.submitter.formAction:st(e).action),_=new FormData(e),s=(r=a.submitter)==null?void 0:r.getAttribute("name");s&&_.append(s,((u=a.submitter)==null?void 0:u.getAttribute("value"))??"");const m=new AbortController;let A=!1;const g=await t({action:c,cancel:()=>A=!0,controller:m,formData:_,formElement:e,submitter:a.submitter})??l;if(A)return;let f;try{const n=await fetch(c,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:_,signal:m.signal});f=aa(await n.text()),f.type==="error"&&(f.status=n.status)}catch(n){if((n==null?void 0:n.name)==="AbortError")return;f={type:"error",error:n}}g({action:c,formData:_,formElement:e,update:n=>l({action:c,result:f,reset:n==null?void 0:n.reset,invalidateAll:n==null?void 0:n.invalidateAll}),result:f})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",i),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",i)}}}const pt="(prefers-reduced-motion: reduce)",na=()=>window.matchMedia(pt).matches,ia=qt(na(),e=>{{const t=i=>{e(i.matches)},l=window.matchMedia(pt);return l.addEventListener("change",t),()=>{l.removeEventListener("change",t)}}});var sa=H('<meta name="description" content="A Wordle clone written in SvelteKit">'),oa=H("(correct)",!0),la=H("(present)",!0),ca=H("(absent)",!0),ua=H("empty",!0),fa=H('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden"><!></span> <input name="guess" type="hidden"></div>'),da=H('<h2 class="visually-hidden"> </h2> <div class="row svelte-1pg2j5l"></div>',!0),va=H("<p> </p>"),ha=H('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',!0),_a=H('<button formaction="?/update" name="key"> </button>'),ga=H('<div class="row svelte-1pg2j5l"></div>'),pa=H('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),ma=H('<div style="position: absolute; left: 50%; top: 30%"></div>'),ba=H('<h1 class="visually-hidden">Sverdle</h1> <form method="POST" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',!0);function Ea(e,t){Xt(t,!1);const l={};It(l);const i=()=>Nt(ia,"$reduced_motion",l),a=U(),o=U(),c=U(),_=U();let s=Ot(t,"form",4),m=U(),A=U();function y(b){var E;const x=b.target.getAttribute("data-key");x==="backspace"?(F(c,p(c).slice(0,-1)),(E=s())!=null&&E.badGuess&&s(s().badGuess=!1,!0)):p(c).length<5&&F(c,p(c)+x)}function g(b){var x;b.metaKey||b.key==="Enter"&&!p(_)||(x=document.querySelector(`[data-key="${b.key}" i]`))==null||x.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}ce(()=>{t.data,ue(()=>{F(a,t.data.answers.at(-1)==="xxxxx")})}),ce(()=>{p(a),t.data,ue(()=>{F(o,p(a)?-1:t.data.answers.length)})}),ce(()=>{t.data,p(o),ue(()=>{F(c,t.data.guesses[p(o)]||"")})}),ce(()=>{p(c),ue(()=>{F(_,p(c).length===5)})}),ce(()=>{p(m),t.data,ue(()=>{F(m,{}),F(A,{}),t.data.answers.forEach((b,x)=>{const E=t.data.guesses[x];for(let w=0;w<5;w+=1){const S=E[w];b[w]==="x"?(be(m,p(m)[S]="exact"),be(A,p(A)[S]="correct")):p(m)[S]||(be(m,p(m)[S]=b[w]==="c"?"close":"missing"),be(A,p(A)[S]=b[w]==="c"?"present":"absent"))}})})});var f=V(e,!0,ba),d=le(f);Et(b=>{var x=K(b,!0,sa);kt.title="Sverdle",R(b,x)});var v=k(k(d)),r=N(v),u=k(k(r)),n=k(k(u)),h=N(n),W=k(k(v));P(()=>{var b;B(u,"playing",!p(a)),B(u,"bad-guess",(b=s())==null?void 0:b.badGuess)}),We("keydown",St,g,!1),Fe(v,(b,x)=>ra(b,x),()=>()=>({update:b})=>{b({reset:!1})}),Qe(u,()=>Array.from(Array(6).keys()),13,(b,x)=>L(b),(b,x,E)=>{var w=V(b,!0,da),S=le(w);const M=q(()=>L(x)===p(o));var j=N(S),G=k(k(S));P(()=>{He(j,`Row ${J(L(x)+1)}`),B(G,"current",p(M))}),Qe(G,()=>Array.from(Array(5).keys()),13,(D,z)=>L(D),(D,z,Y)=>{var C=K(D,!0,fa);const Ee=q(()=>p(M)?p(c):t.data.guesses[L(x)]),T=q(()=>{var I;return(I=t.data.answers[L(x)])==null?void 0:I[L(z)]}),_e=q(()=>{var I;return((I=p(Ee))==null?void 0:I[L(z)])??""}),ie=q(()=>p(M)&&L(z)===p(Ee).length),Q=q(()=>p(T)==="x"),Z=q(()=>p(T)==="c"),$=q(()=>p(T)==="_");var Xe=N(C),Ne=k(Xe),mt=N(Ne),ke=k(k(Ne));Ct(ke);var Se,Ce;P(()=>{B(C,"exact",p(Q)),B(C,"close",p(Z)),B(C,"missing",p($)),B(C,"selected",p(ie)),He(Xe,`${J(p(_e))} `),Se!==(Se=!p(M))&&(ke.disabled=Se),Ce!==(Ce=p(_e))&&(ke.value=Ce)}),ee(mt,()=>p(Q),I=>{var ge=V(I,!0,oa);X(I,ge)},I=>{var ge=Je(I),bt=le(ge);ee(bt,()=>p(Z),se=>{var pe=V(se,!0,la);X(se,pe)},se=>{var pe=Je(se),wt=le(pe);ee(wt,()=>p($),oe=>{var Me=V(oe,!0,ca);X(oe,Me)},oe=>{var Me=V(oe,!0,ua);X(oe,Me)}),X(se,pe)}),X(I,ge)}),R(D,C)},null),X(b,w)},null),ee(h,()=>p(a)||t.data.answers.length>=6,b=>{var x=V(b,!0,ha),E=le(x),w=k(k(E)),S=N(w);qe(S,()=>`${J(p(a)?"you won :)":"game over :(")} play again?`),ee(E,()=>!p(a)&&t.data.answer,M=>{var j=K(M,!0,va),G=N(j);qe(G,()=>`the answer was "${J(t.data.answer)}"`),R(M,j)},null),X(b,x)},b=>{var x=K(b,!0,pa),E=N(x),w=k(k(E)),S=k(k(w)),M;P(()=>{M!==(M=!p(_))&&(E.disabled=M),B(E,"selected",p(_))}),We("click",w,Ke(y),!1),Ze(S,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],1,(j,G,D)=>{var z=K(j,!0,ga);Ze(z,()=>L(G),9,(Y,C,Ee)=>{var T=K(Y,!0,_a),_e=N(T),ie,Q,Z,$;P(()=>{ie!==(ie=L(C))&&Re(T,"data-key",ie),Mt(T,`${J(p(m)[L(C)])} svelte-1pg2j5l`),Q!==(Q=p(_))&&(T.disabled=Q),Z!==(Z=L(C))&&(T.value=Z),$!==($=`${J(L(C))} ${J(p(A)[L(C)]||"")}`)&&Re(T,"aria-label",$),He(_e,L(C))}),We("click",T,Ke(y),!1),R(Y,T)},null),R(j,z)},null),R(b,x)}),ee(W,()=>p(a),b=>{var x=K(b,!0,ma);Fe(x,(E,w)=>Ut(E,w),()=>({particleCount:i()?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),R(b,x)},null),X(e,f),Dt()}export{Ea as component};
